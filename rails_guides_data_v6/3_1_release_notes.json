[{"code":[],"body":"If you're upgrading an existing application, it's a great idea to have good test coverage before going in. You should also first upgrade to Rails 3 in case you haven't and make sure your application still runs as expected before attempting to update to Rails 3.1. Then take heed of the following changes:","title":"1 Upgrading to Rails 3.1","anchor":"#upgrading-to-rails-3-1"},{"title":"1.1 Rails 3.1 requires at least Ruby 1.8.7","anchor":"#rails-3-1-requires-at-least-ruby-1-8-7","code":[],"body":"Rails 3.1 requires Ruby 1.8.7 or higher. Support for all of the previous Ruby versions has been dropped officially and you should upgrade as early as possible. Rails 3.1 is also compatible with Ruby 1.9.2."},{"title":"1.2 What to update in your apps","anchor":"#what-to-update-in-your-apps","code":[],"body":"The following changes are meant for upgrading your application to Rails 3.1.3, the latest 3.1.x version of Rails."},{"title":"1.2.1 Gemfile","anchor":"#gemfile","code":["\ngem 'rails', '= 3.1.3'\ngem 'mysql2'\n\n# Needed for the new asset pipeline\ngroup :assets do\n  gem 'sass-rails',   \"~> 3.1.5\"\n  gem 'coffee-rails', \"~> 3.1.1\"\n  gem 'uglifier',     \">= 1.0.3\"\nend\n\n# jQuery is the default JavaScript library in Rails 3.1\ngem 'jquery-rails'\n\ngem 'rails', '= 3.1.3'\ngem 'mysql2'\n\n# Needed for the new asset pipeline\ngroup :assets do\n  gem 'sass-rails',   \"~> 3.1.5\"\n  gem 'coffee-rails', \"~> 3.1.1\"\n  gem 'uglifier',     \">= 1.0.3\"\nend\n\n# jQuery is the default JavaScript library in Rails 3.1\ngem 'jquery-rails'\n\nCopy\n"],"body":"Make the following changes to your Gemfile."},{"code":[],"body":"","title":"1.2.2 config/application.rb","anchor":"#config-application-rb"},{"code":[],"body":"","title":"1.2.3 config/environments/development.rb","anchor":"#config-environments-development-rb"},{"code":[],"body":"","title":"1.2.4 config/environments/production.rb","anchor":"#config-environments-production-rb"},{"code":["\n# Configure static asset server for tests with Cache-Control for performance\nconfig.serve_static_assets = true\nconfig.static_cache_control = \"public, max-age=3600\"\n\n# Configure static asset server for tests with Cache-Control for performance\nconfig.serve_static_assets = true\nconfig.static_cache_control = \"public, max-age=3600\"\n\nCopy\n"],"body":"","title":"1.2.5 config/environments/test.rb","anchor":"#config-environments-test-rb"},{"code":[],"body":"","title":"1.2.6 config/initializers/wrap_parameters.rb","anchor":"#config-initializers-wrap-parameters-rb"},{"code":[],"body":"","title":"1.2.7 Remove :cache and :concat options in asset helpers references in views","anchor":"#remove-cache-and-concat-options-in-asset-helpers-references-in-views"},{"code":["\n# You should have the 'rails' RubyGem installed\n$ rails new myapp\n$ cd myapp\n\nrails new myapp\ncd myapp\n\nCopy\n"],"body":"","title":"2 Creating a Rails 3.1 application","anchor":"#creating-a-rails-3-1-application"},{"code":[],"body":"Rails now uses a Gemfile in the application root to determine the gems you require for your application to start. This Gemfile is processed by the Bundler gem, which then installs all your dependencies. It can even install all the dependencies locally to your application so that it doesn't depend on the system gems.More information: - bundler homepage","title":"2.1 Vendoring Gems","anchor":"#vendoring-gems"},{"title":"2.2 Living on the Edge","anchor":"#living-on-the-edge","code":["\n$ rails new myapp --edge\n\nrails new myapp --edge\n\nCopy\n","\n$ ruby /path/to/rails/railties/bin/rails new myapp --dev\n\nruby /path/to/rails/railties/bin/rails new myapp --dev\n\nCopy\n"],"body":"Bundler and Gemfile makes freezing your Rails application easy as pie with the new dedicated bundle command. If you want to bundle straight from the Git repository, you can pass the --edge flag:If you have a local checkout of the Rails repository and want to generate an application using that, you can pass the --dev flag:"},{"code":[],"body":"","title":"3 Rails Architectural Changes","anchor":"#rails-architectural-changes"},{"title":"3.1 Assets Pipeline","anchor":"#assets-pipeline","code":[],"body":"The major change in Rails 3.1 is the Assets Pipeline. It makes CSS and JavaScript first-class code citizens and enables proper organization, including use in plugins and engines.The assets pipeline is powered by Sprockets and is covered in the Asset Pipeline guide."},{"title":"3.2 HTTP Streaming","anchor":"#http-streaming","code":[],"body":"HTTP Streaming is another change that is new in Rails 3.1. This lets the browser download your stylesheets and JavaScript files while the server is still generating the response. This requires Ruby 1.9.2, is opt-in and requires support from the web server as well, but the popular combo of NGINX and Unicorn is ready to take advantage of it."},{"title":"3.3 Default JS library is now jQuery","anchor":"#default-js-library-is-now-jquery","code":["\n$ rails new myapp -j prototype\n\nrails new myapp -j prototype\n\nCopy\n"],"body":"jQuery is the default JavaScript library that ships with Rails 3.1. But if you use Prototype, it's simple to switch."},{"code":[],"body":"Active Record has an Identity Map in Rails 3.1. An identity map keeps previously instantiated records and returns the object associated with the record if accessed again. The identity map is created on a per-request basis and is flushed at request completion.Rails 3.1 comes with the identity map turned off by default.","title":"3.4 Identity Map","anchor":"#identity-map"},{"title":"4 Railties","anchor":"#railties","code":[],"body":""},{"code":[],"body":"","title":"5 Action Pack","anchor":"#action-pack"},{"title":"5.1 Action Controller","anchor":"#action-controller","code":[],"body":""},{"code":[],"body":"","title":"5.2 Action Dispatch","anchor":"#action-dispatch"},{"code":[],"body":"Keys are dasherized. Values are JSON-encoded, except for strings and symbols.","title":"5.3 Action View","anchor":"#action-view"},{"code":[],"body":"","title":"6 Active Record","anchor":"#active-record"},{"code":[],"body":"","title":"7 Active Model","anchor":"#active-model"},{"code":[],"body":"","title":"8 Active Resource","anchor":"#active-resource"},{"code":[],"body":"Deprecations:","title":"9 Active Support","anchor":"#active-support"},{"code":[],"body":"See the full list of contributors to Rails for the many people who spent many hours making Rails, the stable and robust framework it is. Kudos to all of them.Rails 3.1 Release Notes were compiled by Vijay Dev","title":"10 Credits","anchor":"#credits"}]