[{"code":[],"body":"If you're upgrading an existing application, it's a great idea to have good test\ncoverage before going in. You should also first upgrade to Rails 6.0 in case you\nhaven't and make sure your application still runs as expected before attempting\nan update to Rails 6.1. A list of things to watch out for when upgrading is\navailable in the\nUpgrading Ruby on Rails\nguide.","title":"1 Upgrading to Rails 6.1","anchor":"#upgrading-to-rails-6-1"},{"title":"2 Major Features","anchor":"#major-features","code":[],"body":""},{"title":"2.1 Per-database Connection Switching","anchor":"#per-database-connection-switching","code":[],"body":"Rails 6.1 provides you with the ability to switch connections per-database. In 6.0 if you switched to the reading role then all database connections also switched to the reading role. Now in 6.1 if you set legacy_connection_handling to false in your configuration, Rails will allow you to switch connections for a single database by calling connected_to on the corresponding abstract class."},{"title":"2.2 Horizontal Sharding","anchor":"#horizontal-sharding","code":[],"body":"Rails 6.0 provided the ability to functionally partition (multiple partitions, different schemas) your database but wasn't able to support horizontal sharding (same schema, multiple partitions). Rails wasn't able to support horizontal sharding because models in Active Record could only have one connection per-role per-class. This is now fixed and horizontal sharding with Rails is available."},{"title":"2.3 Strict Loading Associations","anchor":"#strict-loading-associations","code":[],"body":"Strict loading associations allows you to ensure that all\nyour associations are loaded eagerly and stop N+1's before they happen."},{"title":"2.4 Delegated Types","anchor":"#delegated-types","code":[],"body":"Delegated Types is an alternative to single-table inheritance. This is helpful for representing class hierarchies allowing the superclass to be a concrete class that is represented by its own table. Each subclass has its own table for additional attributes."},{"title":"2.5 Destroy Associations Async","anchor":"#destroy-associations-async","code":[],"body":"Destroy associations async adds the ability for applications to destroy associations in a background job. This can help you avoid timeouts and other performance issues in your application when destroying data."},{"title":"3 Railties","anchor":"#railties","code":[],"body":"Please refer to the Changelog for detailed changes."},{"title":"3.1 Removals","anchor":"#railties-removals","code":[],"body":""},{"code":[],"body":"","title":"3.2 Deprecations","anchor":"#railties-deprecations"},{"title":"3.3 Notable changes","anchor":"#railties-notable-changes","code":[],"body":""},{"title":"4 Action Cable","anchor":"#action-cable","code":[],"body":"Please refer to the Changelog for detailed changes."},{"title":"4.1 Removals","anchor":"#action-cable-removals","code":[],"body":""},{"title":"4.2 Deprecations","anchor":"#action-cable-deprecations","code":[],"body":""},{"title":"4.3 Notable changes","anchor":"#action-cable-notable-changes","code":[],"body":""},{"title":"5 Action Pack","anchor":"#action-pack","code":[],"body":"Please refer to the Changelog for detailed changes."},{"title":"5.1 Removals","anchor":"#action-pack-removals","code":[],"body":""},{"code":[],"body":"","title":"5.2 Deprecations","anchor":"#action-pack-deprecations"},{"code":[],"body":"","title":"5.3 Notable changes","anchor":"#action-pack-notable-changes"},{"code":[],"body":"Please refer to the Changelog for detailed changes.","title":"6 Action View","anchor":"#action-view"},{"title":"6.1 Removals","anchor":"#action-view-removals","code":[],"body":""},{"code":[],"body":"","title":"6.2 Deprecations","anchor":"#action-view-deprecations"},{"title":"6.3 Notable changes","anchor":"#action-view-notable-changes","code":[],"body":""},{"code":[],"body":"Please refer to the Changelog for detailed changes.","title":"7 Action Mailer","anchor":"#action-mailer"},{"title":"7.1 Removals","anchor":"#action-mailer-removals","code":[],"body":""},{"code":[],"body":"","title":"7.2 Deprecations","anchor":"#action-mailer-deprecations"},{"title":"7.3 Notable changes","anchor":"#action-mailer-notable-changes","code":[],"body":""},{"title":"8 Active Record","anchor":"#active-record","code":[],"body":"Please refer to the Changelog for detailed changes."},{"title":"8.1 Removals","anchor":"#active-record-removals","code":[],"body":""},{"code":[],"body":"","title":"8.2 Deprecations","anchor":"#active-record-deprecations"},{"code":[],"body":"","title":"8.3 Notable changes","anchor":"#active-record-notable-changes"},{"code":[],"body":"Please refer to the Changelog for detailed changes.","title":"9 Active Storage","anchor":"#active-storage"},{"title":"9.1 Removals","anchor":"#active-storage-removals","code":[],"body":""},{"code":[],"body":"","title":"9.2 Deprecations","anchor":"#active-storage-deprecations"},{"code":[],"body":"","title":"9.3 Notable changes","anchor":"#active-storage-notable-changes"},{"code":[],"body":"Please refer to the Changelog for detailed changes.","title":"10 Active Model","anchor":"#active-model"},{"title":"10.1 Removals","anchor":"#active-model-removals","code":[],"body":""},{"title":"10.2 Deprecations","anchor":"#active-model-deprecations","code":[],"body":""},{"title":"10.3 Notable changes","anchor":"#active-model-notable-changes","code":[],"body":""},{"code":[],"body":"Please refer to the Changelog for detailed changes.","title":"11 Active Support","anchor":"#active-support"},{"title":"11.1 Removals","anchor":"#active-support-removals","code":[],"body":""},{"code":[],"body":"","title":"11.2 Deprecations","anchor":"#active-support-deprecations"},{"code":[],"body":"","title":"11.3 Notable changes","anchor":"#active-support-notable-changes"},{"title":"12 Active Job","anchor":"#active-job","code":[],"body":"Please refer to the Changelog for detailed changes."},{"title":"12.1 Removals","anchor":"#active-job-removals","code":[],"body":""},{"title":"12.2 Deprecations","anchor":"#active-job-deprecations","code":[],"body":""},{"code":[],"body":"","title":"12.3 Notable changes","anchor":"#active-job-notable-changes"},{"code":[],"body":"Please refer to the Changelog for detailed changes.","title":"13 Action Text","anchor":"#action-text"},{"title":"13.1 Removals","anchor":"#action-text-removals","code":[],"body":""},{"title":"13.2 Deprecations","anchor":"#action-text-deprecations","code":[],"body":""},{"title":"13.3 Notable changes","anchor":"#action-text-notable-changes","code":[],"body":""},{"code":[],"body":"Please refer to the Changelog for detailed changes.","title":"14 Action Mailbox","anchor":"#action-mailbox"},{"title":"14.1 Removals","anchor":"#action-mailbox-removals","code":[],"body":""},{"title":"14.2 Deprecations","anchor":"#action-mailbox-deprecations","code":[],"body":""},{"title":"14.3 Notable changes","anchor":"#action-mailbox-notable-changes","code":[],"body":""},{"title":"15 Ruby on Rails Guides","anchor":"#ruby-on-rails-guides","code":[],"body":"Please refer to the Changelog for detailed changes."},{"title":"15.1 Notable changes","anchor":"#notable-changes","code":[],"body":""},{"title":"16 Credits","anchor":"#credits","code":[],"body":"See the\nfull list of contributors to Rails\nfor the many people who spent many hours making Rails, the stable and robust\nframework it is. Kudos to all of them."}]